# NIP-0003 - QR Library Specification

## Summary

```
    NIP: ?
    Layer: Library
    Title: QR Library Specification
    Author: [AnthonyLaw](https://github.com/AnthonyLaw)
    Co-Author: [Aleix Morgadas](https://github.com/aleixmorgadas)
    Discussions-To: [Nemtech NIP](https://github.com/nemtech/NIP/issues/3)
    Comments-URI: <links to issue page for comments>
    Status: Draft
    Type: Standards Track
    Created: 2018-7-15
    License: MIT
```

## Introduction/Abstract

QR Library is allow for Gerenate/Scan QRCode Address, Backup Wallet, or invoice transanctions.

1. Easy import/export wallet using QRcode.
2. Generate QRcode for Invoice, easy user scan for make payment.
3. Generate QRcode for wallet Address, easy user add new Address conrtact on wallet.

## Motivation

Current verison QRcode library doesn't support mosaics for invoice.

## Design Decisions
: required

## Specification

Current QRCode Generated design (example)

- Ver 2
- Type 2 (invoice)

```
{
  "v":2,
  "type":2,
  "data":
  {
    "addr":"",
    "amount":,
    "msg":"",
    "name":""
   }
}
```

| **field** | **detail**                              |
| --------- | --------------------------------------- |
| v         | version (1 = testnet, 2 = mainnet NIS1) |
| type      | definition of qr-code purpose           |
| data      | dataset                                 |

---

| **Type** | **dataset**             | **detail**              |
| -------- | ----------------------- | ----------------------- |
| 1        | addr, name              | add contact address     |
| 2        | addr, amount, msg, name | invoice                 |
| 3        | name, priv_key, salt    | import / export account |

---

### Purpose

we should keep same format, and add-on new version and type.

#### v2

```
{
  "v":2,
  "type":4,
  "data":
  {
    "addr":"",
    "mosaics":[{
		    "name":"nem:xem",
		    "qty":10}],
    "msg":"",
    "name":""
   }
}
```

| **Type** | **dataset**                        | **detail**              |
| -------- | ---------------------------------- | ----------------------- |
| 4        | addr, mosaics[name,qty], msg, name | Invoice support mosaics |

#### V3

new version : v3 (catapult)

| **Type** | **dataset**                         | **detail**                   |
| -------- | ----------------------------------- | ---------------------------- |
| 1        | addr, name                          | add contact address          |
| 2        | addr, mosaic[name,qty], msg, name   | invoice (normal transaction) |
| 3        | name, priv_key, salt                | import / export account      |
| 4        | [addr, mosaic[name,qty], msg, name] | ACT                          |

Example

```
{
  "v":3,
  "type":2,
  "data":
  {
    "addr":"",
    "mosaics": [
                {
                    "name": "namespaceid:mosaicid",
                    "qty": 100000
                },
                {
                    "name": "nem:xem",
                    "qty": 100
                }
            ],
    "msg":"",
    "name":""
   }
}
```

---

```
{
  "v":3,
  "type":4,
  "data": [
  {
    "addr":"",
    "mosaics": [
    {
      "name": "namespaceid:mosaicid",
      "qty": 100000
    },
    {
      "name": "nem:xem",
      "qty": 100
    }],
    "msg":"",
  },
  {
    "addr":"",
    "mosaics": [
    {
      "name": "nem:xem",
      "qty": 100
    }],
    "msg":"",
   }]
}
```

| **field** | **detail**                         |
| --------- | ---------------------------------- |
| addr      | nem address                        |
| mosaic    | Array: attach more than one mosaic |
| msg       | string                             |
| name      | wallet name                        |


## Implementation

For current Library, we just remain, so we just add in new type of the QR definition.

we should create a standard NEM QRcode definition in document. so all SDK can follow the guideline to build QRcode Library for different language

NEM-SDK : [QR object library](https://github.com/QuantumMechanics/NEM-sdk/blob/9e1d881171eb5c32d61791f8078deba962b56692/src/model/objects/qr.js)

NEM-Library: [QRService library](https://github.com/aleixmorgadas/nem-library-ts/blob/fa649c5854287ee122bd635f2c1507d5218a952e/src/services/QRService.ts)

NEM Android : [Android QR Library](https://github.com/NemProject/NEMAndroidApp/tree/9e9db2233b436e8fdbc35161e52e69171c8c7eb3/app/src/main/java/org/nem/nac/models/qr)

for **nem2-sdk-typescript-javascript**: we need build QRservice library.

## Backwards compatibility

: optional

All NIPs that introduce backwards incompatibilities must include a section describing these incompatibilities and their severity. The NIP must explain how the author proposes to deal with these incompatibilities.

## Drawbacks

: required

It wont break any code, because we use the same format, but just add-on different type and version.

for the V2 - Type 4, it may confuse user, because our currently mobile apps doesn't support mosaic.

I believe most of the user are using QR code, is from mobile apps scan.

## Alternatives

: optional

- What other possibilities have been examined?
- What is the impact of not implementing this proposal?

## References

: required

## History

| **Date**     | **Version**   |
| ------------ | ------------- |
| July 15 2018 | Initial Draft |
| Aug 6 2018   | Second Draft  |
